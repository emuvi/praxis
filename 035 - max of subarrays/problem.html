<!DOCTYPE html> <html style><!--
 Page saved with SingleFile 
 url: https://www.dailycodingproblem.com/solution/18?token=2f34839cc6a48ab13c49adedc8bc529f1d099abbb44c0cd44165ce9aac49d55e8f926985 
 saved date: Sun Aug 20 2023 15:57:56 GMT-0300 (Horário Padrão de Brasília)
--><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name=description content="Daily Coding Problem is a mailing list for coding interview problems. Get exceptionally good at coding interviews by solving one problem every day."><meta property=og:image content=/src/assets/svg/logo-small.svg><meta name=msapplication-config content=/static/browserconfig.xml><meta name=theme-color content=#ffffff><title>Daily Coding Problem</title><style>.nav{margin-left:calc(-50vw + 50%);width:100vw;display:-webkit-box;display:-ms-flexbox;display:flex;padding:24px;background:#fff;border-bottom:2px solid #f1f1f1;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:50px}.nav>.nav-container{max-width:960px}.nav>.nav-container,.nav>.nav-container>.logo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.nav>.nav-container>.logo{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav>.nav-container>.logo .text{margin-left:24px;font-size:22px;color:#555}.nav>.nav-container>.logo .text:hover{text-decoration:underline}.nav>.nav-container>.logo>a.icon{background:#2ab380;display:-webkit-box;display:-ms-flexbox;display:flex;width:58px;height:58px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.nav>.nav-container>.logo>a.icon>img{width:14px}.nav>.nav-container>ul.links{list-style-type:none;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.nav>.nav-container>ul.links>li{display:inline}.nav>.nav-container>ul.links>li>a{font-size:22px;letter-spacing:.75px}footer.footer{margin-top:48px;margin-left:calc(-50vw + 50%);-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#fff;width:100vw;bottom:0;z-index:2;left:0;right:0;border-top:2px solid #f1f1f1;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}footer.footer{display:-webkit-box;display:-ms-flexbox;display:flex}footer.footer>.copyright{padding:24px;border-top:2px solid #f1f1f1;color:#555;width:100%}footer.footer>.copyright>ul{list-style-type:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;line-height:36px}footer.footer>.copyright>ul>li>a{color:#555}@media (min-width:960px){footer.footer>.copyright>ul{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}footer.footer>.copyright>ul>li{margin-right:24px}footer.footer>.copyright>ul>li:last-child{margin-right:0}}/*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}header{display:block}pre{font-family:monospace,monospace}a{background-color:transparent;-webkit-text-decoration-skip:objects}strong{font-weight:bolder}code{font-size:1em}img{border-style:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}*{-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;-webkit-appearance:none}body,html{color:#000;margin:0;padding:0}html{min-height:100%}body,html{height:100%}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;background:#fbfbfb}a{-webkit-tap-highlight-color:rgba(0,0,0,0);color:#2ab380;-webkit-transition:color .15s ease-in-out;transition:color .15s ease-in-out;text-decoration:none}a:hover{color:#208a62}header{font-family:tos,Apple Garamond,Baskerville,Times New Roman,"Droid Serif",Times,"Source Serif Pro",serif;letter-spacing:.5px}code{border-radius:4px;font-family:Consolas,monaco,SF Mono,Monaco,Inconsolata,Fira Mono,Droid Sans Mono,Source Code Pro,monospace}pre{white-space:pre-wrap}.app{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative;min-height:100%}.app pre{font-size:.8em}.app>.app-container{width:960px;height:calc(100% - 350px)}@media (min-width:960px){.app>.app-container{min-height:calc(100vh - 242px)}}.page{min-height:calc(100vh - ((108px + 24px) + (calc(194px + 24px))));display:-webkit-box;display:-ms-flexbox;display:flex}@media (min-width:960px){.page{padding:0;min-height:calc(100vh - ((108px + 24px) + (calc(86px + 24px))))}}.hljs{display:block;overflow-x:auto;padding:0.5em;background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs{color:#c5c8c6}.hljs-title{color:#f0c674}.hljs-comment{color:#707880}.hljs-number{color:#cc6666}.hljs-keyword{color:#81a2be}.solution{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:0}.solution>.hero{background:#2ab380;padding:48px 24px;text-align:center;margin-bottom:24px}.solution>.hero>header{font-size:32px;color:white}.solution>.container{background:#fff;padding:24px;border-radius:8px;font-size:16px;color:#555555;line-height:24px}.solution>.container>header{font-size:24px;text-align:center;margin-bottom:24px;color:#000}.solution>.container p{margin:16px 24px}.solution>.container p:last-child{margin-bottom:0}.solution>.container ul{margin:24px 24px 24px 48px}.solution>.container ul li{line-height:30px}.solution>.container pre{margin:24px}@media only screen and (max-width:600px){.solution{width:100vw!important}}</style><link rel=icon type=image/png sizes=32x32 href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABPlBMVEUqs4Aps38osn8nsn4psn9TwZil3smd3MR5z69Bu40msn5xzKr9/v7////U8OVXw5tPwJab28O+6Nj3/PrA6NkztoUps4AwtYOm38ru+fVQwJZsyqf8/v35/ftkx6I9uouV2cCr4c1dxZ/5/fz7/fxoyaWZ2sLY8eg/u41lx6Irs4Gy5NHr+PNMv5RfxqBwzKolsX1myKTg9Ozx+vaf3cYwtYRJvpLn9vGz5NE8uYoutIJFvZBQwZcxtYQttIKU2b/z+/j7/v3Y8ee65tZNv5VOv5XJ697+///2/PlcxZ41t4fB6drq9/J+0bI/uoxUwpmN1rpjx6JpyaVlyKL6/fxlyKNoyaQksX15z65exZ8vtYM6uYpVwpnM7ODj9e5FvJBkyKLa8ehvy6n2/Pri9O05uIlix6FbxJ1DvI4rs4AMNk2nAAAA8klEQVQYGc3BZyPDABAG4PfuEKKHKqFIiiZGbbV3rdiz9t78/z/Ad7nvfR5UHmKpgo2ra5zaOobJrU9pqqGRYeGmdHNGW1o9WEja2jXbwUhCDAbczi4/ECSgXHdPrwcJ8mEkSEB9qv0DJIP5MBIkKAypDo+wjGZSY+NIwBOTxalp8Myszs0vFJBgcWnZA1ZW10rrG5uM/5jxh7e2Y93ZFRi8vX09cA6PCAY5LuqJuASLnPqlMxc2OS+HkcAmQT6MBDa5KIeXAhNdXceZG4Hl9u7+QR+fGAZ5fslq7BRgcV/9t/f0B8FCuc+v7x+CjUQYlecXAx0bKenCnDAAAAAASUVORK5CYII="><link rel=canonical href="https://www.dailycodingproblem.com/solution/18?token=2f34839cc6a48ab13c49adedc8bc529f1d099abbb44c0cd44165ce9aac49d55e8f926985"><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><body><div id=app class=app><div class=app-container><div> <div class=nav><div class=nav-container><div class=logo><a href=https://www.dailycodingproblem.com/ class=icon><img src=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9Ii0xNCAxMC42IDE5LjEgMzAuNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAtMTQgMTAuNiAxOS4xIDMwLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiNGRkZGRkY7fQ0KCS5zdDF7Y2xpcC1wYXRoOnVybCgjU1ZHSURfNF8pO30NCjwvc3R5bGU+DQo8Zz4NCgkNCgkJPGltYWdlIHN0eWxlPSJkaXNwbGF5Om5vbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgOyIgd2lkdGg9IjE0NTAiIGhlaWdodD0iMjQyIiB4bGluazpocmVmPSIyOUJFQjBBNDU2MkU3MjdELmpwZWciICB0cmFuc2Zvcm09Im1hdHJpeCgwLjI0IDAgMCAwLjIzOCAxMzUgNykiPg0KCTwvaW1hZ2U+DQoJPGc+DQoJCTxnPg0KCQkJPGc+DQoJCQkJPHBhdGggaWQ9IlNWR0lEXzFfIiBjbGFzcz0ic3QwIiBkPSJNLTcuNSwxMC42djMuMWgxLjFjMC41LDAsMSwwLjEsMS40LDAuMmMwLjQsMC4xLDAuOCwwLjMsMS4xLDAuNnMwLjUsMC43LDAuNywxLjENCgkJCQkJQy0zLDE2LjEtMywxNi43LTMsMTcuNHYyLjdjMCwxLjYsMC4zLDIuOCwwLjgsMy42YzAuNiwwLjgsMS40LDEuMiwyLjYsMS40Yy0wLjYsMC4xLTEuMSwwLjItMS41LDAuNGMtMC40LDAuMi0wLjgsMC41LTEuMSwwLjkNCgkJCQkJYy0wLjMsMC40LTAuNSwwLjktMC42LDEuNUMtMi45LDI4LjUtMywyOS4yLTMsMzB2NC4zYzAsMC43LTAuMSwxLjMtMC4yLDEuN2MtMC4yLDAuNS0wLjQsMC44LTAuNywxLjFzLTAuNywwLjUtMS4xLDAuNg0KCQkJCQlzLTAuOSwwLjItMS40LDAuMmgtMS4xVjQxaDEuNGMxLjIsMCwyLjItMC4xLDMuMS0wLjRjMC45LTAuMywxLjYtMC43LDIuMS0xLjNTMCwzOCwwLjMsMzcuMnMwLjQtMS44LDAuNC0zdi00LjMNCgkJCQkJYzAtMC42LDAuMS0xLjEsMC4yLTEuNWMwLjEtMC40LDAuMy0wLjcsMC42LTFzMC42LTAuNSwxLTAuNmMwLjQtMC4xLDAuOS0wLjIsMS41LTAuMmgxLjF2LTMuMUg0Yy0xLjIsMC0yLTAuMy0yLjUtMC44DQoJCQkJCWMtMC41LTAuNi0wLjctMS40LTAuNy0yLjV2LTIuOGMwLTIuNC0wLjYtNC4xLTEuNy01LjJDLTIsMTEuMS0zLjcsMTAuNi02LDEwLjZILTcuNUwtNy41LDEwLjZ6Ii8+DQoJCQk8L2c+DQoJCTwvZz4NCgk8L2c+DQoJPGc+DQoJCTxnPg0KCQkJPGc+DQoJCQkJPHBhdGggaWQ9IlNWR0lEXzNfIiBjbGFzcz0ic3QwIiBkPSJNLTExLjIsMTcuN2MxLjUsMCwyLjgsMS4zLDIuOCwyLjhzLTEuMywyLjgtMi44LDIuOFMtMTQsMjItMTQsMjAuNQ0KCQkJCQlDLTE0LDE4LjktMTIuNywxNy43LTExLjIsMTcuN0wtMTEuMiwxNy43eiIvPg0KCQkJPC9nPg0KCQk8L2c+DQoJPC9nPg0KCTxnPg0KCQk8Zz4NCgkJCTxnPg0KCQkJCTxkZWZzPg0KCQkJCQk8cGF0aCBpZD0iU1ZHSURfMl8iIGQ9Ik0zNzEuOSw0NC42Yy0xLjcsMC0zLjItMC43LTQuNC0yLjJWNDhjMCwxLTAuOCwxLjgtMS45LDEuOGMtMSwwLTEuOS0wLjgtMS45LTEuOFYzMS43DQoJCQkJCQljMC0xLDAuOC0xLjgsMS45LTEuOGMxLDAsMS44LDAuOCwxLjgsMS44djAuMWMxLjEtMS40LDIuNi0yLjEsNC40LTIuMWMzLjYsMCw2LjMsMi43LDYuMyw3LjQNCgkJCQkJCUMzNzguMiw0MS45LDM3NS42LDQ0LjYsMzcxLjksNDQuNkwzNzEuOSw0NC42eiBNMzcwLjcsMzNjLTEuMiwwLTIuNiwwLjctMy4yLDEuNnY1YzAuNiwwLjksMiwxLjYsMy4yLDEuNg0KCQkJCQkJYzIuMSwwLDMuNi0xLjcsMy42LTQuMkMzNzQuMywzNC43LDM3Mi45LDMzLDM3MC43LDMzTDM3MC43LDMzeiBNMzg4LjIsMzMuNGMtMS4xLDAuMS0yLjIsMC42LTIuOSwxLjV2Ny43YzAsMS0wLjgsMS45LTEuOCwxLjkNCgkJCQkJCWgtMC4xYy0xLDAtMS45LTAuOC0xLjktMS45VjMxLjdjMC0xLDAuOC0xLjgsMS45LTEuOGMxLDAsMS44LDAuOCwxLjgsMS44VjMyYzAuNy0wLjksMS42LTIuMSwzLjEtMi4xYzEuMSwwLDEuNiwwLjcsMS42LDEuNQ0KCQkJCQkJQzM5MCwzMi42LDM4OS4yLDMzLjIsMzg4LjIsMzMuNEwzODguMiwzMy40eiBNMzk5LjMsNDQuNmMtNC43LDAtNy41LTMuNC03LjUtNy41YzAtNCwyLjgtNy40LDcuNS03LjRzNy41LDMuNCw3LjUsNy40DQoJCQkJCQlDNDA2LjgsNDEuMiw0MDQsNDQuNiwzOTkuMyw0NC42TDM5OS4zLDQ0LjZ6IE0zOTkuMywzM2MtMi4zLDAtMy42LDEuOS0zLjYsNC4xczEuMyw0LjIsMy42LDQuMmMyLjMsMCwzLjYtMS45LDMuNi00LjINCgkJCQkJCUM0MDIuOSwzNC45LDQwMS42LDMzLDM5OS4zLDMzTDM5OS4zLDMzeiBNNDE4LjMsNDQuNmMtMS43LDAtMy4zLTAuOC00LjQtMi4ydjAuMWMwLDEtMC44LDEuOS0xLjksMS45Yy0xLDAtMS45LTAuOC0xLjktMS45DQoJCQkJCQlWMjYuM2MwLTEsMC44LTEuOCwxLjktMS44YzEsMCwxLjgsMC44LDEuOCwxLjh2NS42YzEuMS0xLjQsMi43LTIuMiw0LjQtMi4yYzMuNiwwLDYuMywyLjgsNi4zLDcuNQ0KCQkJCQkJQzQyNC42LDQxLjksNDIxLjksNDQuNiw0MTguMyw0NC42TDQxOC4zLDQ0LjZ6IE00MTcuMSwzM2MtMS4yLDAtMi42LDAuNy0zLjIsMS42djVjMC42LDAuOSwyLDEuNiwzLjIsMS42DQoJCQkJCQljMi4yLDAsMy42LTEuNiwzLjYtNC4xQzQyMC43LDM0LjcsNDE5LjMsMzMsNDE3LjEsMzNMNDE3LjEsMzN6IE00MjkuOCw0NC40Yy0xLDAtMS45LTAuOC0xLjktMS45VjI2LjNjMC0xLDAuOC0xLjgsMS45LTEuOA0KCQkJCQkJYzEsMCwxLjgsMC44LDEuOCwxLjh2MTYuM0M0MzEuNyw0My42LDQzMC45LDQ0LjQsNDI5LjgsNDQuNEw0MjkuOCw0NC40eiBNNDQ3LjgsMzguNEg0MzljMC4yLDEuOCwxLjcsMy4zLDQuMSwzLjMNCgkJCQkJCWMwLjgsMCwxLjktMC4yLDIuOC0wLjdjMC4yLTAuMSwwLjUtMC4yLDAuNy0wLjJjMC44LDAsMS42LDAuNiwxLjYsMS41YzAsMS43LTMuNiwyLjQtNS41LDIuNGMtNC4zLDAtNy42LTIuOS03LjYtNy41DQoJCQkJCQljMC00LjEsMy03LjQsNy4zLTcuNGMzLjIsMCw1LjYsMS45LDYuNiw0LjhjMC4yLDAuNiwwLjQsMS40LDAuNCwyLjFDNDQ5LjUsMzcuNiw0NDguNywzOC40LDQ0Ny44LDM4LjRMNDQ3LjgsMzguNHoNCgkJCQkJCSBNNDQyLjUsMzIuN2MtMi4zLDAtMy4zLDEuNy0zLjUsMy4xaDdDNDQ1LjksMzQuNSw0NDQuOSwzMi43LDQ0Mi41LDMyLjdMNDQyLjUsMzIuN3ogTTQ3Mi4zLDQ0LjRjLTEsMC0xLjktMC44LTEuOS0xLjl2LTcuMw0KCQkJCQkJYzAtMS4zLTAuNi0yLjMtMi4xLTIuM2MtMS4zLDAtMi40LDAuOS0yLjksMS42djcuOWMwLDEtMC44LDEuOS0xLjksMS45Yy0xLDAtMS45LTAuOC0xLjktMS45di03LjNjMC0xLjMtMC42LTIuMy0yLjEtMi4zDQoJCQkJCQljLTEuMywwLTIuNCwwLjktMi45LDEuN3Y3LjljMCwxLTAuOCwxLjktMS45LDEuOWMtMSwwLTEuOS0wLjgtMS45LTEuOVYzMS43YzAtMSwwLjgtMS44LDEuOS0xLjhjMSwwLDEuOCwwLjgsMS44LDEuOHYwLjINCgkJCQkJCWMwLjYtMC45LDIuNS0yLjIsNC42LTIuMnMzLjQsMSwzLjksMi42YzAuOC0xLjMsMi43LTIuNiw0LjktMi42YzIuNiwwLDQuMiwxLjQsNC4yLDQuM3Y4LjZDNDc0LjIsNDMuNiw0NzMuNCw0NC40LDQ3Mi4zLDQ0LjQNCgkJCQkJCUw0NzIuMyw0NC40eiIvPg0KCQkJCTwvZGVmcz4NCgkJCQk8Y2xpcFBhdGggaWQ9IlNWR0lEXzRfIj4NCgkJCQkJPHVzZSB4bGluazpocmVmPSIjU1ZHSURfMl8iICBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTsiLz4NCgkJCQk8L2NsaXBQYXRoPg0KCQkJCTxnIGNsYXNzPSJzdDEiPg0KCQkJCQkNCgkJCQkJCTxpbWFnZSBzdHlsZT0ib3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDpuZXcgICAgOyIgd2lkdGg9IjE0NTAiIGhlaWdodD0iMjQyIiB4bGluazpocmVmPSIyOUJFQjBBNDU2MkU3MjdGLmpwZWciICB0cmFuc2Zvcm09Im1hdHJpeCgwLjI0IDAgMCAwLjIzOCAxMzUgNykiPg0KCQkJCQk8L2ltYWdlPg0KCQkJCTwvZz4NCgkJCTwvZz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K></a> <a href=https://www.dailycodingproblem.com/><div class=text>
 Daily Coding Problem
 </div></a></div> <ul class=links><li><a href=https://www.dailycodingproblem.com/blog>Blog</a></ul></div></div></div> <div class="solution page"><div class=hero><header>Daily Coding Problem #18</header></div> <div class=container><header>
 Problem
 </header> <div><p>This problem was asked by Google.</p>
<p>Given an array of integers and a number k, where 1 &lt;= k &lt;= length of the array, compute the maximum values of each subarray of length k.</p>
<p>For example, given array = [10, 5, 2, 7, 8, 7] and k = 3, we should get: [10, 7, 8, 8], since:</p>
<ul>
<li>10 = max(10, 5, 2)</li>
<li>7 = max(5, 2, 7)</li>
<li>8 = max(2, 7, 8)</li>
<li>8 = max(7, 8, 7)</li>
</ul>
<p>Do this in O(n) time and O(k) space. You can modify the input array in-place and you do not need to store the results. You can simply print them out as you compute them.</p>
</div></div> <div class=container><header>
 Solution
 </header> <div style=margin-bottom:3rem><p>Even though the question states O(n), in an interview it's always useful to first write out
a brute force solution, which may provide us with some insight on some deeper structure
in the problem.</p>
<p>So let's first write out a naive solution: we can simply take each subarray of k length and compute
their maxes.</p>
<pre><code class="hljs python"><span class=hljs-function><span class=hljs-keyword>def</span> <span class=hljs-title>max_of_subarrays</span><span class=hljs-params>(lst, k)</span>:</span>
    <span class=hljs-keyword>for</span> i <span class=hljs-keyword>in</span> range(len(lst) - k + <span class=hljs-number>1</span>):
        print(max(lst[i:i + k]))
</code></pre>
<p>This takes O(n * k) time, which doesn't get us quite to where we want. How can we make this faster?</p>
<p>One possible idea is this: we could use a max-heap of size k and add the first k elements to the heap
initially, and then pop off the max and add the next element for the rest of the array. This is better,
but adding and extracting from the heap will take O(log k), so this algorithm will take O(n * log k),
which is still not enough. How can we do better?</p>
<p>Notice that, for example, the input [1, 2, 3, 4, 5, 6, 7, 8, 9] and k = 3, after evaluating the max of
first range, since 3 is at the end, we only need to check whether 4 is greater than 3. If it is, then
we can print 4 immediately, and if it isn't, we can stick with 3.</p>
<p>On the other hand, for the input [9, 8, 7, 6, 5, 4, 3, 2, 1] and k = 3, after evaluating the max of
the first range, we can't do the same thing, since we can't use 9 again. We have to look at 8 instead,
and then once we move on to the next range, we have to look at 7.</p>
<p>These two data points suggest an idea: we can keep a double-ended queue with max size k and only keep
what we need to evaluate in it. That is, if we see [1, 3, 5], then we only need to keep [5], since
we know that 1 and 3 cannot possibly be the maxes.</p>
<p>So what we can do is maintain an ordered list of indices, where we only keep the elements we care about,
that is, we will maintain the loop invariant that our queue is always ordered so that we only keep
the indices we care about (i.e, there are no elements that are greater after, since we would just pick
the greater element as the max instead).</p>
<p>It will help to go over an example. Consider our test input: [10, 5, 2, 7, 8, 7] and k = 3. Our queue at each step would look like this (recall that these are indices):</p>
<h3 id=preprocessing>Preprocessing</h3>
<p>After processing 10: [0]
After processing 5: [0, 1] # 5 is smaller than 10, and 10 is still valid until we hit the 3rd index
After processing 2: [0, 1, 2] # 2 is smaller than 5, and 10 is still valid</p>
<h3 id=main-loop>Main Loop</h3>
<p>Print value of first element in our queue: <strong>10</strong></p>
<p>After processing 7: [4] # 10 is no longer valid (we can tell since the current index - 0 &gt; k), so we dequeue from the front. 7 is bigger than 5 and 2, so we get rid of them from the back and replace it with the 7</p>
<p>Print value of first element in our queue: <strong>7</strong></p>
<p>After processing 8: [5] # 8 is bigger than 7, so no point in keeping 7 around. We get rid of it from the back and replace it with the 8</p>
<p>Print value of first element in our queue: <strong>8</strong></p>
<p>After processing 7: [5, 4] # 7 is smaller than 8, so we enqueue it from the back</p>
<p>Print value of first element in our queue: <strong>8</strong></p>
<h3 id=code>Code</h3>
<pre><code class="hljs python"><span class=hljs-keyword>from</span> collections <span class=hljs-keyword>import</span> deque

<span class=hljs-function><span class=hljs-keyword>def</span> <span class=hljs-title>max_of_subarrays</span><span class=hljs-params>(lst, k)</span>:</span>
    q = deque()
    <span class=hljs-keyword>for</span> i <span class=hljs-keyword>in</span> range(k):
        <span class=hljs-keyword>while</span> q <span class=hljs-keyword>and</span> lst[i] &gt;= lst[q[<span class=hljs-number>-1</span>]]:
            q.pop()
        q.append(i)

    <span class=hljs-comment># Loop invariant: q is a list of indices where their corresponding values are in descending order.</span>
    <span class=hljs-keyword>for</span> i <span class=hljs-keyword>in</span> range(k, len(lst)):
        print(lst[q[<span class=hljs-number>0</span>]])
        <span class=hljs-keyword>while</span> q <span class=hljs-keyword>and</span> q[<span class=hljs-number>0</span>] &lt;= i - k:
            q.popleft()
        <span class=hljs-keyword>while</span> q <span class=hljs-keyword>and</span> lst[i] &gt;= lst[q[<span class=hljs-number>-1</span>]]:
            q.pop()
        q.append(i)
    print(lst[q[<span class=hljs-number>0</span>]])
</code></pre>
</div> <div style=display:none;justify-content:center;margin-bottom:3rem></div></div></div> <footer class=footer><div class=copyright><ul><li><a href=https://www.dailycodingproblem.com/ class=copyright>© Daily Coding Problem 2019</a></li> <li><a href=https://www.dailycodingproblem.com/privacy class=copyright>Privacy Policy</a></li> <li><a href=https://www.dailycodingproblem.com/terms-of-service class=copyright>Terms of Service</a></li> <li><a href=https://www.dailycodingproblem.com/press class=press>Press</a></ul></div></footer></div></div>